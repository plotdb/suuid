(function(){var t,e,n,r,i,o,f;t=require("uuid").v4,e={map:"123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0_.",offset:6,padding:"000000"},n={map:"0123456789abcdef",offset:4,padding:"0000"},r=function(t,e,n){var r,i,o,f,a,u,s,p;for(o=(i=[(r=(r="string"==typeof t?t.split("").map(function(t){return(e.padding+e.map.indexOf(t).toString(2)).slice(-e.offset)}).reduce(function(t,e){return t+"/"+e},""):t.toString(2)).replace(/\//g,"")).length,Math.ceil(r.length/n.offset),""])[0],f=i[1],a=i[2],u=0;u<f;++u)s=u,p=parseInt(r.substring(o-(s+1)*n.offset,o-s*n.offset),2),a=n.map[p]+a;return a},i=function(t){return r(t,n,e)},o=function(t){return r(t,e,n)},(f=function(e){var n,r,o;return"object"==typeof e?(e=(n=[e.id,e])[0],r=n[1]):r={},null==r.timestamp&&(r.timestamp=!0),e||(e=t().toLowerCase()),o=e.split("-").map(function(t,e){return i(t)}).join(""),o=(r.timestamp?i(Date.now()):"")+""+o}).timestamp=function(t){return parseInt(o(t.substring(0,t.length-23)).replace(/^0+/,""),"16")},f.encode=i,module.exports=f}).call(this);
